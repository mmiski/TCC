<div class="row section">
    <div class="col s12">
      <a (click)="gridRotas()" class="btn btn-flat btn-waves"><i class="material-icons left">arrow_back</i>Voltar</a>
    </div>
  </div>
<div class="row container">
  <div class="card z-depth-5">
    <div class="card-content">
        <span class="card-title">Mapa</span>
        <div class="row">
            <agm-map [latitude]="-26.225484" [longitude]="-52.6721232" [zoom]="30" [streetViewControl]="false" (mapClick)="adicionarPonto($event)">
                <agm-marker *ngFor="let p of listaPontos | async" [latitude]="p.latitude" [longitude]="p.longitude" [markerDraggable]="true" (dragEnd)="alteraMov($event, p)">
                    <agm-info-window>
                            <form #form="ngForm" class="row">
                                <div class="input-field col s6 m8">                                
                                  <input name="descricao" [(ngModel)]="p.descricao" placeholder="Descrição" type="text" class="validate" required #descricao="ngModel">
                                </div>
                                <button [disabled]="!form.form.valid" (click)="adicionarPonto()"class="col s6 m6 btn btn-waves green">Salvar</button> 
                              </form>
                              <a (click)="show('DANGER', p.$key)" class="col s12 m6 btn btn-waves red">Deletar</a>
                    </agm-info-window>                    
                </agm-marker>
            </agm-map>
        </div>
    </div> 
  </div>
</div>

<!-- Modal LOADING -->
<div id="loading" class="modal" materialize="modal" style="height:180px;" [materializeParams]="msgParams" [materializeActions]="loading">
    <div class="modal-content center">
        <h4 style="padding-bottom:1%;">Carregando</h4>
        <div  class="preloader-wrapper big active">
            <div class="spinner-layer spinner-blue">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
                <div class="circle"></div>
              </div><div class="circle-clipper right">
                <div class="circle"></div>
              </div>
            </div>
      
            <div class="spinner-layer spinner-red">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
                <div class="circle"></div>
              </div><div class="circle-clipper right">
                <div class="circle"></div>
              </div>
            </div>
      
            <div class="spinner-layer spinner-yellow">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
                <div class="circle"></div>
              </div><div class="circle-clipper right">
                <div class="circle"></div>
              </div>
            </div>
      
            <div class="spinner-layer spinner-green">
              <div class="circle-clipper left">
                <div class="circle"></div>
              </div><div class="gap-patch">
                <div class="circle"></div>
              </div><div class="circle-clipper right">
                <div class="circle"></div>
              </div>
            </div>
          </div>
    </div>
  </div>
  
  <!-- Modal ALERT -->
  <div id="alert" class="modal" materialize="modal" [materializeParams]="msgParams" [materializeActions]="alert">
    <div class="modal-content center no-padding">
        <div class="row orange lighten-2 white-text title-alert">
        <h4>{{msgTitulo}}</h4>
    </div>
    <div class="row">
        <p>{{msgCorpo}}</p>
    </div>
  </div>
  <div class="modal-footer">
    <a class="waves-effect waves-green btn orange lighten-1" (click)="close('ALERT')">OK</a> 
  </div>
  </div>
  
  <!-- Modal SUCCESS -->
  <div id="success" class="modal" materialize="modal" [materializeParams]="msgParams" [materializeActions]="success">
    <div class="modal-content center no-padding">
      <div class="row green lighten-2 white-text title-alert">
            <h4>{{msgTitulo}}</h4>
        </div>
        <div class="row">
            <p>{{msgCorpo}}</p>
        </div>
    </div>
    <div class="modal-footer center">
      <a class="waves-effect waves-green btn green lighten-1" (click)="close('SUCCESS')">OK</a> 
    </div>
  </div>
  
  <!-- Modal DANGER -->
  <div id="danger" class="modal" materialize="modal" [materializeParams]="msgParams" [materializeActions]="danger">
    <div class="modal-content center no-padding">
    <div class="row red lighten-2 white-text title-alert">
      <h4>Exclusão</h4>
    </div>
    <div class="row">
      <p>Deseja excluir esse registro?</p>
    </div>
    </div>
    <div class="modal-footer">
    <a class="waves-effect waves-green btn btn-flat" (click)="excluir(key)">Sim</a> 
    <a class="waves-effect waves-green btn red lighten-1" (click)="close('DANGER')">Não</a>
    </div>
    </div>
  